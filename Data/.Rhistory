raw_data = read_excel('BDD_SummerSchool_BENOIT.xlsx',sheet="raw_data",col_types = "numeric")
View(raw_data)
raw_data = read_excel('BDD_SummerSchool_BENOIT.xlsx',sheet="raw_data",
col_types = "date","numeric","numeric","numeric","numeric","numeric"
,"numeric","numeric","numeric","numeric","numeric","numeric","numeric"
,"numeric","numeric","numeric","numeric","numeric","numeric","numeric"
,"numeric","numeric","numeric")
raw_data = read_excel('BDD_SummerSchool_BENOIT.xlsx',sheet="raw_data",
col_types = "date","numeric")
View(raw_data)
raw_data = read_excel('BDD_SummerSchool_BENOIT.xlsx',sheet="raw_data",
col_types = "date")
raw_data = read_excel('BDD_SummerSchool_BENOIT.xlsx',sheet="raw_data",
col_types = "numeric")
raw_data$dates <- as.Date(raw_data$dates)
?as.Date
View(raw_data)
raw_data = read_excel('BDD_SummerSchool_BENOIT.xlsx',sheet="raw_data")
View(raw_data)
raw_data$dates <- as.Date(raw_data$dates)
raw_data = read.table('BDD_SummerSchool_BENOIT.xlsx')
raw_data$dates
raw_data[1]
raw_data[1:]
raw_data[1,]
raw_data[0,]
raw <- raw_data[1,]
raw
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data
?read_excel
target <- raw_data$`USA (Acc_Slow)`
target
target$dates <- raw_data$dates
taget$ACC_SLO <- raw_data$`USA (Acc_Slow)`
target$ACC_SLO <- raw_data$`USA (Acc_Slow)`
target
View(raw_data)
View(target)
?data.frame
target <- data.frame(col1 <- raw_data$dates,col2<-raw_data$`USA (Acc_Slow)`)
target
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
target
covariates <- subset(raw_data, select = -c("dates","USA(Acc_Slow)") )
covariates <- subset(raw_data, select = -c(dates,USA(Acc_Slow)) )
covariates <- subset(raw_data, select = -c("dates","USA(Acc_Slow)"))
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
View(covariates)
len(covariates)
length(covariates)
nrow(covariates)
covariates[12,]
covariates[12:15]
covariates[12:15,10:12]
covariates[12:15,:]
covariates[12:15,]
covariates[4,]
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
predictions
logit_predict(date_split,step_ahead)
library(readxl)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
date_split = 204
step_ahead=15
pred_logit
library(readxl)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
date_split = 204
step_ahead=15
logit_predict <- function(date_split,step_ahead){
for (id_split in(date_split:nrow(covariates))){
y_train <- target[0:id_split-step_ahead+1]
x_train <- covariates[0:id_split-step_ahead+1,]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
predictions[id_split,1] <- predict(logistic,new_data=x_test,type='response')
predictions[id_split,2] = ifelse(probs>0.5,1,0)
}
return(predictions)
}
logit_predict(date_split,step_ahead)
library(readxl)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
date_split = 204
step_ahead=15
logit_predict <- function(date_split,step_ahead){
for (id_split in(date_split:nrow(covariates))){
y_train <- target[1:id_split-step_ahead+1]
x_train <- covariates[1:id_split-step_ahead+1,]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
predictions[id_split,1] <- predict(logistic,new_data=x_test,type='response')
predictions[id_split,2] = ifelse(probs>0.5,1,0)
}
return(predictions)
}
logit_predict(date_split,step_ahead)
(204:nrow(covariates))
target[1:204-15+1]
target[1:(204-15+1)]
target[1:(204-15+1),]
target[1:(204-15+1),2]
library(readxl)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
date_split = 204
step_ahead=15
logit_predict <- function(date_split,step_ahead){
for (id_split in(date_split:nrow(covariates))){
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
predictions[id_split,1] <- predict(logistic,new_data=x_test,type='response')
predictions[id_split,2] = ifelse(probs>0.5,1,0)
}
return(predictions)
}
logit_predict(date_split,step_ahead)
debugSource("C:/thesis_1/r/testr.R")
View(logistic)
debugSource("C:/thesis_1/r/testr.R")
View(predictions)
covariates[204,]
?predict
debugSource("C:/thesis_1/r/testr.R")
ans
install.packages("randomForest")
RF_predict(date_split,step_ahead)
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
a
plot(a)
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
ans <- c()
date_split = 204
step_ahead=15
id_split=300
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
summary(logistic)
predict(logistic,new_data=x_test,type='response')
id_split-step_ahead
tail(predict(logistic,new_data=x_test,type='response')n=1)
x<-predict(logistic,new_data=x_test,type='response')
tail(x)
tail(x,n=1)
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
debugSource("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
ans <- c()
date_split = 204
step_ahead=15
id_split=300
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
p <- predict(logistic,new_data=x_test,type='response')
predictions[id_split,1] <- tail(p,n=1)
predictions[300]
predictions[300,]
tail(p,n=1)
p
x_test
covariates[300,]
summary(logistic)
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
p <- predict(logistic,new_data=x_test,type='response')
p
predict(logistic,new_data=x_test)
x_test
covariates[300,]
summary(rf)
id_split=300
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
data <- raw_data[,!(names(raw_data) %in% c("dates"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
ans <- c()
date_split = 204
step_ahead=15
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
summary(logistic)
predict(logistic,new_data=x_test,type='response')
predict(logistic,new_data=covartiates[300,],type='response')
predict(logistic,new_data=covartiates[305,],type='response')
predict(logistic,new_data=covartiates[5,],type='response')
predict(logistic,new_data=x_train,type='response')
data$`USA (Acc_Slow)`<- as.factor(data$`USA (Acc_Slow)`)
View(data)
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
data <- raw_data[,!(names(raw_data) %in% c("dates"))]
View(data)
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
data <- raw_data[,!(names(raw_data) %in% c("dates"))]
View(data)
raw_data
View(raw_data)
raw_data$`USA (Acc_Slow)`
raw_data$acc_slow<-raw_data$`USA (Acc_Slow)`
View(raw_data)
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
data <- raw_data[,!(names(raw_data) %in% c("dates"))]
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data$acc<- raw_data$`USA (Acc_Slow)`
data <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
View(data)
logist<-glm(acc~.,data=data[1:(id_split-step_ahead+1],family="binomial")
logist<-glm(acc~.,data=data[1:(id_split-step_ahead+1)],family="binomial")
id_split=300
date_split=204
step_ahead=15
logist<-glm(acc~.,data=data[1:(id_split-step_ahead+1)],family="binomial")
data[1:(id_split-step_ahead+1)]
logist<-glm(acc~.,data=data[1:(id_split-step_ahead+1),],family="binomial")
predict(logist,new_data=covariates[id_split],type='response')
source("C:/thesis_1/r/testr.R")
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data$acc<- raw_data$`USA (Acc_Slow)`
data <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
ans <- c()
date_split = 204
step_ahead = 15
id_split=320
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y_train~.,data=x_train,family="binomial")
p <- predict(logistic,new_data=x_test,type='response')
p
tail(p,n=1)
id_split
320-step_ahead+1
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
a
library(readxl)
library(randomForest)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data$acc<- raw_data$`USA (Acc_Slow)`
data <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
ans <- c()
date_split = 204
step_ahead = 15
id_split=320
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
a
tail(a,n=1)
tail(a,n=1)[0]
tail(a,n=1)[1]
s<-tail(a,n=1)
s
predictions[id_split,2]<-tail(a,n=1)
predictions
predictions[id_split,]
predictions[id_split,2]<-tail(p,n=1)
predictions[id_split,]
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
View(predictions)
a
View(a)
source("C:/thesis_1/r/testr.R")
View(a)
source("C:/thesis_1/r/testr.R")
View(a)
plot(a)
?plot
?ggplot
ggplot(a)
library(ggplot2)
ggplot(a)
ggplot(a)
?plot
plot(a$date,a$label)
a[date_split:,]
a[date_split:]
a[date_split]
a[date_split,]
a[date_split:,]
a[date_split:]
a[date_split:300,]
a[date_split:length(a),]
a[date_split:nrow(a),]
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
plot(a$date,a$label)
View(a)
View(predictions)
source("C:/thesis_1/r/testr.R")
warnings()
a
library(readxl)
library(randomForest)
library(ggplot2)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data$acc<- raw_data$`USA (Acc_Slow)`
data <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
ans <- c()
date_split = 204
step_ahead = 15
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
predictions <- predictions[date_split:nrow(predictions),]
id_split=300
y_train <- target[1:(id_split-step_ahead+1),2]
x_train <- covariates[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
View(x_test)
logistic <- glm(y_train~.,data=x_train,family="binomial")
View(logistic)
summary(logistic)
View(covariates)
source("C:/thesis_1/r/testr.R")
warnings()
a
library(readxl)
library(randomForest)
library(ggplot2)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data$y<- raw_data$`USA (Acc_Slow)`
data <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)","y"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
ans <- c()
date_split = 204
step_ahead = 15
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
predictions <- predictions[date_split:nrow(predictions),]
predictions
id_split=290
data_train <- data[1:(id_split-step_ahead+1),]
View(data_train)
x_test <- covariates[id_split,]
logistic <- glm(y~.,data=data_train,family="binomial")
summary(logistic)
predict(logistic,new_data=x_test,type='response')
id_split
id_splitr-276
id_splitt-276
id_split-276
predict(logistic,new_data=data[id_split,],type='response')
predict(logistic,new_data=data[id_split+50,],type='response')
predict(logistic,newdata=x_test,type='response')
source("C:/thesis_1/r/testr.R")
id_split=200
data_train <- data[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y~.,data=data_train,family="binomial")
p <- predict(logistic,newdata=x_test,type='response')
p
source("C:/thesis_1/r/testr.R")
View(a)
source("C:/thesis_1/r/testr.R")
view(a)
View(a)
a
plot(predictions$date,a)
a<-a[id_split,]
a<-a[id_split:length(a)]
plot(predictions$date,a)
predictions
length(a)
nrow(prediction)
nrow(predictions)
a
a<-a[5:length(a)]
a
plot(predictions$date,a)
source("C:/thesis_1/r/testr.R")
a[203,2]
a[203,1]
a[203,2]
a[203,]
a[201,]
a
a[333.1]
#predictions[id_split,3] <- ifelse(pred[id_split]>0.5,1,0)
}
source("C:/thesis_1/r/testr.R")
View(a)
library(readxl)
library(randomForest)
library(ggplot2)
raw_data = read_excel('BDD_SummerSchool_BENOIT1.xlsx',sheet="raw_data")
raw_data$y<- raw_data$`USA (Acc_Slow)`
data <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)"))]
covariates <- raw_data[,!(names(raw_data) %in% c("dates","USA (Acc_Slow)","y"))]
target <- data.frame(date = raw_data$dates,ACC_SLO = raw_data$`USA (Acc_Slow)`)
ans <- c()
date_split = 204
step_ahead = 15
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
predictions <- predictions[date_split:nrow(predictions),]
id_split=250
data_train <- data[1:(id_split-step_ahead+1),]
x_test <- covariates[id_split,]
logistic <- glm(y~.,data=data_train,family="binomial")
pred[id_split] <- predict(logistic,newdata=x_test,type='response')
pred <- numeric(nrow(data))
pred[id_split] <- predict(logistic,newdata=x_test,type='response')
pred
pred[id_split]
predictions[id_split,2] <- pred[id_split]
View(predictions)
id_split
predictions[id_split]
predictions[id_split,2]
predictions[id_split,]
predictions[250,]
predictions[249,]
predictions[120,]
predictions$120
predictions <- data.frame(date=raw_data$dates,label=0,preds=0)
predictions <- predictions[date_split:nrow(predictions),]
predictions[200]
predictions[200,2]
predictions[200,]
predictions[1,]
predictions[1,]<- 50
predictions[1,2]<- 50
predictions[1,]
source("C:/thesis_1/r/testr.R")
View(a)
source("C:/thesis_1/r/testr.R")
plot(a$date,a$label,type="l")
plot(a$date,a$preds,type="l")
View(A)
View(a)
source("C:/thesis_1/r/testr.R")
warnings()
a
plot(a$date,a$label)
plot(a$date,a$label,type="l")
plot(a$date,a$preds,type="l")
warnings()
source("C:/thesis_1/r/testr.R")
warnings()
?as.factor()
source("C:/thesis_1/r/testr.R")
source("C:/thesis_1/r/testr.R")
plot(a$date,a$preds,type="l")
plot(a$date,a$label,type="l")
